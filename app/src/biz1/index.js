import $ from 'jquery';
import _ from 'lodash';
import './index.less';
import tpl from './index.html';

export function start() {
    let allData = [{
    "id": 6656,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1640,
    "newState": 1644,
    "ratio": 0.5556,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6655,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1642,
    "newState": 1644,
    "ratio": 0.2168,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6654,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1640,
    "newState": 1641,
    "ratio": 0.0741,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6653,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1643,
    "newState": 1643,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6652,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1644,
    "newState": 1644,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6651,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1640,
    "newState": 1640,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6650,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1643,
    "newState": 1642,
    "ratio": 0.7404,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6649,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1640,
    "newState": 1643,
    "ratio": 0.2593,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6648,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1640,
    "newState": 1642,
    "ratio": 0.1111,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6647,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1643,
    "newState": 1644,
    "ratio": 0.2266,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6646,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1642,
    "newState": 0,
    "ratio": 0.0029,
    "shareFlag": 1,
    "typeDesc": "细分市场"
}, {
    "id": 6645,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1640,
    "newState": 0,
    "ratio": 0.0004,
    "shareFlag": 1,
    "typeDesc": "细分市场"
}, {
    "id": 6644,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1644,
    "newState": 0,
    "ratio": 0.0641,
    "shareFlag": 1,
    "typeDesc": "细分市场"
}, {
    "id": 6643,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1643,
    "newState": 1641,
    "ratio": 0.0378,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6642,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1644,
    "newState": 1640,
    "ratio": 0.0109,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6641,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1643,
    "newState": 1642,
    "ratio": 0.3681,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6640,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1643,
    "newState": 1643,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6639,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1641,
    "newState": 1640,
    "ratio": 0.0460,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6638,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1644,
    "newState": 1642,
    "ratio": 0.2337,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6637,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1643,
    "newState": 1644,
    "ratio": 0.5841,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6636,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1644,
    "newState": 1641,
    "ratio": 0.0435,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6635,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1641,
    "newState": 0,
    "ratio": 0.0009,
    "shareFlag": 1,
    "typeDesc": "细分市场"
}, {
    "id": 6634,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1643,
    "newState": 1640,
    "ratio": 0.0100,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6633,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1641,
    "newState": 1643,
    "ratio": 0.3666,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6632,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1643,
    "newState": 1644,
    "ratio": 0.7035,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6631,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1642,
    "newState": 1642,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6630,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1641,
    "newState": 1644,
    "ratio": 0.3021,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6629,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1643,
    "newState": 1643,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6628,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1642,
    "newState": 1641,
    "ratio": 0.0555,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6627,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1642,
    "newState": 1644,
    "ratio": 0.1059,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6626,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1642,
    "newState": 1643,
    "ratio": 0.8370,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6625,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1643,
    "newState": 0,
    "ratio": 0.0055,
    "shareFlag": 1,
    "typeDesc": "细分市场"
}, {
    "id": 6624,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1644,
    "newState": 0,
    "ratio": 0.0542,
    "shareFlag": 1,
    "typeDesc": "细分市场"
}, {
    "id": 6623,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1642,
    "newState": 1640,
    "ratio": 0.0121,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6622,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1644,
    "newState": 1641,
    "ratio": 0.0622,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6621,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1642,
    "newState": 1641,
    "ratio": 0.0675,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6620,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1644,
    "newState": 1640,
    "ratio": 0.0281,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6619,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1642,
    "newState": 1642,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6618,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1644,
    "newState": 1643,
    "ratio": 0.7889,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6617,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1643,
    "newState": 1641,
    "ratio": 0.0302,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6616,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1642,
    "newState": 1643,
    "ratio": 0.7036,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6615,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1644,
    "newState": 1642,
    "ratio": 0.1208,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6614,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1643,
    "newState": 1640,
    "ratio": 0.0027,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6613,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1641,
    "newState": 0,
    "ratio": 0.0009,
    "shareFlag": 1,
    "typeDesc": "细分市场"
}, {
    "id": 6612,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1640,
    "newState": 0,
    "ratio": 0.0004,
    "shareFlag": 1,
    "typeDesc": "细分市场"
}, {
    "id": 6611,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1641,
    "newState": 1644,
    "ratio": 0.3000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6610,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1640,
    "newState": 1642,
    "ratio": 0.1020,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6609,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1642,
    "newState": 1643,
    "ratio": 0.5928,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6608,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1641,
    "newState": 1641,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6607,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1640,
    "newState": 1643,
    "ratio": 0.2857,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6606,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1642,
    "newState": 1642,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6605,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1641,
    "newState": 1640,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6604,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1640,
    "newState": 1644,
    "ratio": 0.5510,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6603,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1641,
    "newState": 1643,
    "ratio": 0.2250,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6602,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1642,
    "newState": 1644,
    "ratio": 0.3089,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6601,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1641,
    "newState": 1642,
    "ratio": 0.4750,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6600,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1644,
    "newState": 0,
    "ratio": 0.0662,
    "shareFlag": 1,
    "typeDesc": "细分市场"
}, {
    "id": 6599,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1642,
    "newState": 0,
    "ratio": 0.0030,
    "shareFlag": 1,
    "typeDesc": "细分市场"
}, {
    "id": 6598,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1643,
    "newState": 0,
    "ratio": 0.0045,
    "shareFlag": 1,
    "typeDesc": "细分市场"
}, {
    "id": 6597,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1643,
    "newState": 1640,
    "ratio": 0.0124,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6596,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1641,
    "newState": 1640,
    "ratio": 0.0352,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6595,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1641,
    "newState": 1641,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6594,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1643,
    "newState": 1642,
    "ratio": 0.2437,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6593,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1642,
    "newState": 1640,
    "ratio": 0.0017,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6592,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1641,
    "newState": 1642,
    "ratio": 0.2962,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6591,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1643,
    "newState": 1641,
    "ratio": 0.0404,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6590,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1640,
    "newState": 0,
    "ratio": 0.0004,
    "shareFlag": 1,
    "typeDesc": "细分市场"
}, {
    "id": 6589,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1640,
    "newState": 1644,
    "ratio": 0.5294,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6588,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1640,
    "newState": 1643,
    "ratio": 0.4118,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6587,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1641,
    "newState": 1642,
    "ratio": 0.2414,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6586,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1644,
    "newState": 1644,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6585,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1640,
    "newState": 1640,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6584,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1641,
    "newState": 1641,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6583,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1644,
    "newState": 1643,
    "ratio": 0.7120,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6582,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1641,
    "newState": 1644,
    "ratio": 0.3027,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6581,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1640,
    "newState": 1642,
    "ratio": 0.0588,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6580,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1641,
    "newState": 1643,
    "ratio": 0.4100,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6579,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1640,
    "newState": 1641,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6578,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1641,
    "newState": 0,
    "ratio": 0.0009,
    "shareFlag": 1,
    "typeDesc": "细分市场"
}, {
    "id": 6577,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1643,
    "newState": 0,
    "ratio": 0.0057,
    "shareFlag": 1,
    "typeDesc": "细分市场"
}, {
    "id": 6576,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1644,
    "newState": 1642,
    "ratio": 0.1324,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6575,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1644,
    "newState": 1643,
    "ratio": 0.7809,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6574,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1644,
    "newState": 1644,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6573,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1640,
    "newState": 1640,
    "ratio": 0.0000,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6572,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1642,
    "newState": 1641,
    "ratio": 0.0776,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6571,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1640,
    "newState": 1641,
    "ratio": 0.0612,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6570,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 2,
    "oldState": 1642,
    "newState": 1640,
    "ratio": 0.0208,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6569,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 1,
    "oldState": 1642,
    "newState": 0,
    "ratio": 0.0039,
    "shareFlag": 1,
    "typeDesc": "细分市场"
}, {
    "id": 6568,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1644,
    "newState": 1640,
    "ratio": 0.0264,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}, {
    "id": 6567,
    "formId": 1949,
    "taskId": 2438,
    "tradeGroupId": 1632,
    "type": 1,
    "device": 4,
    "oldState": 1644,
    "newState": 1641,
    "ratio": 0.0603,
    "shareFlag": 0,
    "typeDesc": "细分市场"
}];


let newData = _.groupBy(allData, 'device')[4];

newData = newData.sort(function (a, b) {
    return a.newState - b.newState;
});

let oldStates = newData.map(item => item.oldState).sort();

oldStates = _.uniq(oldStates);

let array = [];

oldStates.forEach((item, i) => {
    let row = [];


    newData.forEach((innerItem, j) => {
        if (item === innerItem.oldState && innerItem.newState !== 0) {
            row.push(innerItem.ratio);
        }
    });
    array.push(row);
});

console.log(JSON.stringify(array));

    $('#main').html(_.template(tpl)({ abc: 'apple' }));
}
